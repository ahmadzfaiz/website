{% extends 'biodiversity/base.html' %}
{% load biodiversity_custom_tags %}

{% block title %}Daftar Pengamatan {{page}} | Biodiversity{% endblock title %}

{% block head %}
<style>
  .logo-gbif{
    background-color: grey;
    @media screen and (min-width: 1200px) {
      width: 75%;
    }
  }
</style>
{% endblock head %}

{% block body %}
<div class="container">
  <div class="mt-3">
    <h1>Pengamatan Spesies di Indonesia</h1>
    <p>
      Data yang ditampilkan pada laman ini diakses dari <a href="https://www.gbif.org/">www.gbif.org</a> yang diunduh pada tanggal 18 April 2024.
    </p>
    <div class="logo-gbif">
      <img class="m-3" src="https://www.gbif.org/img/full_logo_white.svg" alt="Logo GBIF">
    </div>
    <p>Data berikut ini dikelola oleh GBIF. Perhatikan jenis lisensi pada kolom paling kanan jika menggunakan data ini.</p>
  </div>

  <form method="post">
    {% csrf_token %}
    <label for="page-num">Menuju ke halaman:</label>
    <input type="number" name="page" id="page-num" min="1" max="{{count}}">
    <button class="btn btn-sm btn-primary" type="submit">Submit</button>
    <p>Jumlah halaman: <b>{{count}}</b></p>
  </form>

  <div class="table-responsive mb-5">
    <table class="table table-striped table-hover">
      <thead>
        <tr class="align-middle">
          <th>Tanggal Kejadian</th>
          <th>Lokasi</th>
          <th>Bujur</th>
          <th>Lintang</th>
          <th>Negara Penerbit</th>
          <th>Pengamatan</th>
          <th>Kingdom</th>
          <th>Phylum</th>
          <th>Order</th>
          <th>Family</th>
          <th>Genus</th>
          <th>Species</th>
          <th>Lisensi</th>
        </tr>
      </thead>
      <tbody>
        {% for item in data %}
        <tr>
          <td>{{item.eventDate|biodiversity_proper_date}}</td>
          <td>
            {% if item.locality == None %}
              {{item.verbatimLocality}}
            {% else %}
              {{item.locality}}
            {% endif %}
          </td>
          <td>{{item.decimalLongitude}}</td>
          <td>{{item.decimalLatitude}}</td>
          <td class="text-center">
            <img src="https://flagpedia.net/data/flags/h20/{{item.publishingCountry|lower}}.webp" alt="{{item.publishingCountry}}">
          </td>
          <td>
            <a href="{% url 'biodiversity_detail_pengamatan' item.key %}">{{item.basisOfRecord}}</a>
          </td>
          <td>{{item.kingdom}}</td>
          <td>{{item.phylum}}</td>
          <td>{{item.order}}</td>
          <td>{{item.family}}</td>
          <td>{{item.genus}}</td>
          <td>{{item.species}}</td>
          <td>
            <a href="{{item.license}}" target="_blank">
              <img src="{{item.license|biodiversity_license_logo}}" alt="" height="20">
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock body %}